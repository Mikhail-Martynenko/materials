import{_ as E}from"./BGY31PtP.js";import{m as f,o as i,c,F as y,n as M,p as w,w as J,t as m,d as P,a as n,_ as C,q as F,r as v,s as k,u as $,v as _,b,x as U,y as q,z,A as G}from"./DSvm6L09.js";const K={class:"breadcrumbs"},Q={key:1,class:"breadcrumbs__inactive"},W=f({__name:"Breadcrumbs",props:{breadcrumbs:{}},setup(e){const o=e,r=s=>s===o.breadcrumbs.length-1;return(s,a)=>{const l=E;return i(),c("ol",K,[(i(!0),c(y,null,M(s.breadcrumbs,(t,d)=>(i(),c("li",{key:d},[r(d)?(i(),c("span",Q,m(t.label),1)):(i(),w(l,{key:0,to:t.path},{default:J(()=>[P(m(t.label)+" ",1),a[0]||(a[0]=n("span",null," / ",-1))]),_:2},1032,["to"]))]))),128))])}}}),X=C(W,[["__scopeId","data-v-81650d3a"]]),Y={class:"filter-sort"},tt={class:"filter-sort__block"},et=["value"],st={class:"filter-sort__block"},ot=["value"],rt=["value"],at=f({__name:"FilterSort",props:{materials:{},sortOrder:{},selectedMaterial:{}},emits:["update:sortOrder","update:selectedMaterial"],setup(e,{emit:o}){const r=o,s=l=>{const t=l.target.value;r("update:sortOrder",t)},a=l=>{const t=l.target.value;r("update:selectedMaterial",t)};return(l,t)=>(i(),c("div",Y,[n("div",tt,[t[1]||(t[1]=n("label",{for:"sortOrder",class:"filter-sort__label"},"Сортировать по:",-1)),n("select",{id:"sortOrder",value:l.sortOrder,onChange:s,class:"filter-sort__select"},t[0]||(t[0]=[n("option",{value:"asc"},"По возрастанию",-1),n("option",{value:"desc"},"По убыванию",-1)]),40,et)]),n("div",st,[t[3]||(t[3]=n("label",{for:"materialFilter",class:"filter-sort__label"},"Материал:",-1)),n("select",{id:"materialFilter",value:l.selectedMaterial,onChange:a,class:"filter-sort__select"},[t[2]||(t[2]=n("option",{value:""},"Все материалы",-1)),(i(!0),c(y,null,M(l.materials,d=>(i(),c("option",{key:d.id,value:d.id},m(d.name),9,rt))),128))],40,ot)])]))}}),nt=C(at,[["__scopeId","data-v-930ad3a6"]]),it={},lt={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ct(e,o){return i(),c("svg",lt,o[0]||(o[0]=[n("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.99997 19.8999C4.53235 19.8999 0.099968 15.4676 0.099968 9.99994C0.099968 4.53233 4.53235 0.0999451 9.99997 0.0999451C15.4676 0.0999451 19.9 4.53233 19.9 9.99994C19.9 15.4676 15.4676 19.8999 9.99997 19.8999ZM9.99997 18.0999C14.4735 18.0999 18.1 14.4734 18.1 9.99994C18.1 5.52644 14.4735 1.89994 9.99997 1.89994C5.52646 1.89994 1.89997 5.52644 1.89997 9.99994C1.89997 14.4734 5.52646 18.0999 9.99997 18.0999ZM12.9636 6.66355L8.19997 11.4272L6.13637 9.36355L4.86358 10.6363L8.19997 13.9727L14.2364 7.93635L12.9636 6.66355Z",fill:"#27AE60"},null,-1)]))}const dt=C(it,[["render",ct]]),_t={},ut={class:"reset-button"};function pt(e,o){return i(),c("button",ut,o[0]||(o[0]=[n("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.66412 3.80229C5.50428 3.80194 5.3502 3.82003 5.20378 3.85443C5.00307 3.41204 4.73794 3.01515 4.4364 2.7136C3.92459 2.2018 3.1174 2 2 2V3.8C2.6826 3.8 3.07541 3.8982 3.1636 3.9864C3.50378 4.32657 3.8 5.01776 3.8 5.6L3.80905 5.72728L4.69093 11.9005C3.21532 11.977 2.07218 13.1229 2.00111 14.5554L2 15.5C2.08714 16.9795 3.22648 18.1177 4.64892 18.1985L4.85323 18.1989C5.22356 19.2481 6.22398 20 7.4 20C8.5756 20 9.57571 19.2487 9.94636 18.2H12.0536C12.4243 19.2487 13.4244 20 14.6 20C16.0912 20 17.3 18.7912 17.3 17.3C17.3 15.8088 16.0912 14.6 14.6 14.6C13.4244 14.6 12.4243 15.3513 12.0536 16.4H9.94636C9.57571 15.3513 8.5756 14.6 7.4 14.6C6.2244 14.6 5.22429 15.3513 4.85364 16.4H4.7C4.24101 16.3725 3.82928 15.9612 3.79838 15.4461L3.8 14.6C3.82427 14.1332 4.23318 13.7243 4.7446 13.6989L6.52132 13.6993L6.5342 13.7H15.6052L15.738 13.6578C16.4204 13.4413 16.9667 12.9275 17.2253 12.2623L17.3201 12.0746L17.6282 11.4643C17.9469 10.8325 18.2656 10.1997 18.5762 9.58142C19.3369 8.06697 19.8153 7.1045 19.9213 6.86815C20.4654 5.65441 19.3632 4.72022 18.2366 4.70032L5.66412 3.80229ZM15.2924 11.9H6.60154C6.54375 11.8839 6.49972 11.835 6.4911 11.774L5.60919 5.60063L18.104 6.4954C17.8854 6.94126 17.4879 7.73762 16.9676 8.77345L16.9546 8.79941C16.6576 9.39065 16.3393 10.0226 16.0211 10.6535L15.7134 11.2631L15.5968 11.4939L15.5529 11.596C15.5058 11.727 15.4125 11.8346 15.2924 11.9ZM14.6 18.1999C15.097 18.1999 15.5 17.797 15.5 17.2999C15.5 16.8029 15.097 16.3999 14.6 16.3999C14.1029 16.3999 13.7 16.8029 13.7 17.2999C13.7 17.797 14.1029 18.1999 14.6 18.1999ZM8.3 17.2999C8.3 17.797 7.89706 18.1999 7.4 18.1999C6.90294 18.1999 6.5 17.797 6.5 17.2999C6.5 16.8029 6.90294 16.3999 7.4 16.3999C7.89706 16.3999 8.3 16.8029 8.3 17.2999Z",fill:"black"})],-1)]))}const mt=C(_t,[["render",pt],["__scopeId","data-v-91c02de6"]]),vt={class:"reset-button"},Ct={width:"20",height:"19",viewBox:"0 0 20 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ft=["fill"],gt=f({__name:"Like",props:{isActive:{type:Boolean}},setup(e){return(o,r)=>(i(),c("button",vt,[(i(),c("svg",Ct,[n("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.0979 1.44916e-05C12.795 0 11.9551 0.155217 10.9924 0.626465C10.6359 0.800937 10.3015 1.01105 9.99095 1.25618C9.69235 1.0248 9.37131 0.824326 9.0296 0.655321C8.04816 0.169898 7.16523 0 5.90907 0C2.54477 0 0.0999756 2.78754 0.0999756 6.40789C0.0999756 9.14198 1.62442 11.7831 4.46393 14.3369C5.95438 15.6774 7.85737 17.004 9.22022 17.7097L9.99998 18.1135L10.7797 17.7097C12.1426 17.004 14.0456 15.6774 15.536 14.3369C18.3755 11.7831 19.9 9.14198 19.9 6.40789C19.9 2.82586 17.4321 0.0138225 14.0979 1.44916e-05ZM18.1 6.40793C18.1 8.54995 16.8276 10.7544 14.3324 12.9986C12.972 14.2221 11.2231 15.4449 10 16.0864C8.77695 15.4449 7.02806 14.2221 5.66767 12.9986C3.17246 10.7544 1.90002 8.54995 1.90002 6.40793C1.90002 3.73298 3.5953 1.80004 5.90911 1.80004C6.90787 1.80004 7.52333 1.91847 8.23164 2.2688C8.65002 2.47573 9.01981 2.74897 9.3399 3.09043L10.0021 3.79687L10.6583 3.08483C10.9856 2.72969 11.3608 2.45023 11.7837 2.24322C12.4713 1.90668 13.0483 1.80004 14.0942 1.80004C16.3794 1.80952 18.1 3.7701 18.1 6.40793Z",fill:o.isActive?"red":"black"},null,8,ft)]))]))}}),ht=C(gt,[["__scopeId","data-v-7ee5c88e"]]),R=()=>({loadFromLocalStorage:(r,s)=>{const a=localStorage.getItem(s);return a&&(r=JSON.parse(a)),r},saveToLocalStorage:(r,s)=>{localStorage.setItem(s,JSON.stringify(r))}}),Lt=F("favorites",()=>{const e=v([]),{loadFromLocalStorage:o,saveToLocalStorage:r}=R();e.value=o([],"favorites");function s(a){e.value.includes(a)?e.value=e.value.filter(t=>t!==a):e.value.push(a),r(e.value,"favorites")}return{favoritesArrayId:e,toggleFavorite:s}}),bt=F("cart",()=>{const e=v([]),{loadFromLocalStorage:o,saveToLocalStorage:r}=R();e.value=o([],"cart");function s(a){e.value.includes(a)?e.value=e.value.filter(t=>t!==a):e.value.push(a),r(e.value,"cart")}return{cartArrayId:e,toggleCart:s}}),St={class:"product-list__item"},$t={class:"product-list__image"},wt=["src","alt"],kt={key:0},yt={class:"product-list__info"},Mt={class:"product-list__code"},Ft={key:0},It={class:"product-list__name"},Ot={class:"product-list__details"},At={class:"product-list__price"},Bt={key:0,class:"product-list__price-old"},xt={class:"product-list__price-current"},Zt={class:"product-list__icons"},Nt=f({__name:"Item",props:{item:{}},setup(e){const o=e,r=Lt(),s=bt(),a=k(()=>r.favoritesArrayId.includes(o.item.id)),l=k(()=>s.cartArrayId.includes(o.item.id));return(t,d)=>{var g,h,L,u,O,A,B,x,Z,N,T,D,H,V;const I=dt,p=mt,S=ht;return i(),c("div",St,[n("div",$t,[n("img",{src:(h=(g=t.item)==null?void 0:g.image)==null?void 0:h.url,alt:(L=t.item)==null?void 0:L.name,class:"product-list__img"},null,8,wt),(O=(u=t.item)==null?void 0:u.price)!=null&&O.old_price?(i(),c("span",kt,"Скидка")):$("",!0)]),n("div",yt,[n("div",Mt,[(A=t.item)!=null&&A.code?(i(),c("p",Ft,m((B=t.item)==null?void 0:B.code),1)):$("",!0)]),n("h3",It,m((x=t.item)==null?void 0:x.name),1),n("div",Ot,[n("div",At,[(N=(Z=t.item)==null?void 0:Z.price)!=null&&N.old_price?(i(),c("p",Bt,m(Math.floor((D=(T=t.item)==null?void 0:T.price)==null?void 0:D.old_price))+"₽",1)):$("",!0),n("p",xt,m(Math.floor((V=(H=t.item)==null?void 0:H.price)==null?void 0:V.current_price))+"₽",1)]),n("div",Zt,[_(l)?(i(),w(I,{key:0,onClick:d[0]||(d[0]=j=>_(s).toggleCart(t.item.id))})):(i(),w(p,{key:1,onClick:d[1]||(d[1]=j=>_(s).toggleCart(t.item.id))})),b(S,{onClick:d[2]||(d[2]=j=>_(r).toggleFavorite(t.item.id)),"is-active":_(a)},null,8,["is-active"])])])])])}}}),Tt=C(Nt,[["__scopeId","data-v-8899554f"]]);function Dt(e,o,r){return k(()=>{let s=e.value;return r.value&&(s=s.filter(a=>String(a.material)===r.value)),s.sort((a,l)=>{const t=a.price.current_price||0,d=l.price.current_price||0;return o.value==="asc"?t-d:d-t})})}const Ht=F("product",()=>{const e=v([]),o=v([]);async function r(){try{const[s,a]=await Promise.all([fetch("api/items.json"),fetch("api/materials.json")]);e.value=await s.json(),o.value=await a.json()}catch(s){console.error("Ошибка при загрузке данных:",s)}}return{items:e,materials:o,fetchData:r}}),Vt={class:"product-container"},jt={class:"product-container__list"},Rt=f({__name:"index",setup(e){const o=v([{label:"Главная",path:"#"},{label:"Системы хранения",path:"#"},{label:"Комплекты стеллажных систем",path:"/"}]),r=Ht(),{items:s,materials:a}=U(r),l=v("asc"),t=v("");q(async()=>await r.fetchData());const d=Dt(s,l,t);return(I,p)=>{const S=X,g=nt,h=Tt,L=z("auto-animate");return i(),c("div",Vt,[b(S,{breadcrumbs:_(o)},null,8,["breadcrumbs"]),p[2]||(p[2]=n("h2",{class:"product-container__title"},"Комплекты стеллажных систем",-1)),b(g,{materials:_(a),sortOrder:_(l),selectedMaterial:_(t),"onUpdate:sortOrder":p[0]||(p[0]=u=>l.value=u),"onUpdate:selectedMaterial":p[1]||(p[1]=u=>t.value=u),class:"product-container__filter-sort"},null,8,["materials","sortOrder","selectedMaterial"]),G((i(),c("div",jt,[(i(!0),c(y,null,M(_(d),u=>(i(),c("article",{key:u.id},[b(h,{item:u},null,8,["item"])]))),128))])),[[L]])])}}}),Pt=C(Rt,[["__scopeId","data-v-a45f03f8"]]);export{Pt as default};
